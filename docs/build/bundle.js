var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function i(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function l(t,e,n,r,s,o,c){const l=function(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|s[r];return t}return e.dirty|s}return e.dirty}(e,r,s,o);if(l){const s=i(e,n,r,c);t.p(s,l)}}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function $(){return p("")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let y;function b(t){y=t}const x=[],w=[],_=[],k=[],j=Promise.resolve();let q=!1;function N(t){_.push(t)}let O=!1;const L=new Set;function T(){if(!O){O=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];b(e),E(e.$$)}for(b(null),x.length=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];L.has(e)||(L.add(e),e())}_.length=0}while(x.length);for(;k.length;)k.pop()();q=!1,O=!1,L.clear()}}function E(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const P=new Set;let S;function R(){S={r:0,c:[],p:S}}function A(){S.r||r(S.c),S=S.p}function C(t,e){t&&t.i&&(P.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),S.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function D(t){t&&t.c()}function M(t,n,o,c){const{fragment:i,on_mount:l,on_destroy:a,after_update:u}=t.$$;i&&i.m(n,o),c||N((()=>{const n=l.map(e).filter(s);a?a.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(N)}function U(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(x.push(t),q||(q=!0,j.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,s,o,c,i,l,a=[-1]){const u=y;b(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=o?o(e,s.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&B(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();s.intro&&C(e.$$.fragment),M(e,s.target,s.anchor,s.customElement),T()}b(u)}class I{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=[];function J(e,n=t){let r;const s=[];function c(t){if(o(e,t)&&(e=t,r)){const t=!F.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),F.push(n,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(o,i=t){const l=[o,i];return s.push(l),1===s.length&&(r=n(c)||t),o(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(r(),r=null)}}}}const{API_URL:G}={API_URL:"https://api.mbs3.fightthe.pw",UI_URL:"https://mbs3.fightthe.pw",isProd:!0},K=J(null),Q=J(null),V=J(null),W=()=>{const{hash:t}=location;"#/players"==t?V.set("players"):(V.set("home"),"#/"!=t&&(location.hash="#/"))};window.addEventListener("hashchange",W),W();const X=(t,e={headers:{}})=>fetch(`${G}${t}`,Object.assign(Object.assign({},e),{headers:Object.assign({Authorization:Y?`Bearer ${Y}`:void 0},e.headers)})).then((t=>t.json()));let Y;function Z(t){let e,n,r,s,o,c,i,l,h=t[0].username+"";return{c(){e=d("div"),n=p("Logged in as\r\n    "),r=d("b"),s=p(h),o=p(" -\r\n    "),c=d("a"),c.textContent="Log out",g(c,"href","#/"),g(e,"class","me svelte-1qdx2t0")},m(f,d){u(f,e,d),a(e,n),a(e,r),a(r,s),a(e,o),a(e,c),i||(l=m(c,"click",t[1]),i=!0)},p(t,e){1&e&&h!==(h=t[0].username+"")&&v(s,h)},d(t){t&&f(e),i=!1,l()}}}function tt(e){let n,r,s,o,c,i=e[0]&&Z(e);return{c(){n=d("div"),r=d("a"),r.innerHTML='<div class="logo svelte-1qdx2t0"><img alt="" src="/images/logo.png" class="svelte-1qdx2t0"/></div> \n    <h1 class="svelte-1qdx2t0"><img alt="Mania Beginner&#39;s Showdown" src="/images/title.png" class="svelte-1qdx2t0"/> \n      <div class="three svelte-1qdx2t0"><span class="svelte-1qdx2t0">3</span></div></h1>',s=h(),o=d("div"),o.innerHTML='<div class="host-title svelte-1qdx2t0">Hosted by</div>\n    Paturages &amp; Davvy',c=h(),i&&i.c(),g(r,"href","#/"),g(o,"class","hosts svelte-1qdx2t0"),g(n,"class","banner svelte-1qdx2t0")},m(t,e){u(t,n,e),a(n,r),a(n,s),a(n,o),a(n,c),i&&i.m(n,null)},p(t,[e]){t[0]?i?i.p(t,e):(i=Z(t),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&f(n),i&&i.d()}}}function et(t,e,n){let r;c(t,K,(t=>n(0,r=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function c(t){try{l(r.next(t))}catch(t){o(t)}}function i(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}l((r=r.apply(t,e||[])).next())}))};return[r,()=>s(void 0,void 0,void 0,(function*(){yield fetch("https://api.mbs3.fightthe.pw/auth/logout",{method:"POST",credentials:"include"}),location.reload()}))]}(async()=>{const{data:t}=await X("/items/players?fields=id,username,country,avatar,timezone,ranking,pp&sort=ranking");Q.set(t);const e=await fetch(`${G}/auth/refresh`,{method:"POST",credentials:"include"});if(200==e.status){const n=await e.json();Y=n.data.access_token;const{data:{first_name:r,email:s,avatar:o}}=await X("/users/me?fields=first_name,email"),c=t.find((({id:t})=>s==t));K.set({avatar:o,username:r,id:s,player:c}),c||(location.hash="#/players")}})();class nt extends I{constructor(t){super(),H(this,t,et,tt,o,{})}}function rt(t){let e,n,r,s,o,c;const p=t[3].default,h=function(t,e,n,r){if(t){const s=i(t,e,n,r);return t[0](s)}}(p,t,t[2],null);return{c(){e=d("a"),n=d("div"),h&&h.c(),g(n,"class","text svelte-1nr1k0b"),g(e,"href",t[0]),g(e,"target",t[1]),g(e,"rel",r="_blank"===t[1]?"noopener":void 0),g(e,"class","button svelte-1nr1k0b")},m(r,i){u(r,e,i),a(e,n),h&&h.m(n,null),s=!0,o||(c=m(e,"click",t[4]),o=!0)},p(t,[n]){h&&h.p&&4&n&&l(h,p,t,t[2],n,null,null),(!s||1&n)&&g(e,"href",t[0]),(!s||2&n)&&g(e,"target",t[1]),(!s||2&n&&r!==(r="_blank"===t[1]?"noopener":void 0))&&g(e,"rel",r)},i(t){s||(C(h,t),s=!0)},o(t){z(h,t),s=!1},d(t){t&&f(e),h&&h.d(t),o=!1,c()}}}function st(t,e,n){let{$$slots:r={},$$scope:s}=e,{href:o}=e,{target:c=""}=e;return t.$$set=t=>{"href"in t&&n(0,o=t.href),"target"in t&&n(1,c=t.target),"$$scope"in t&&n(2,s=t.$$scope)},[o,c,s,r,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class ot extends I{constructor(t){super(),H(this,t,st,rt,o,{href:0,target:1})}}function ct(e){let n,r,s,o,c,i,l,$,m,y,b,x,w,_,k,j,q,N,O,L=e[0].username+"",T=e[0].country+"",E=e[0].ranking+"",P=Number(e[0].pp).toFixed(2)+"";return{c(){n=d("a"),r=d("div"),s=d("img"),c=h(),i=d("div"),l=p(L),$=h(),m=d("div"),y=p(T),b=h(),x=d("div"),w=p(E),_=h(),k=d("div"),j=p("("),q=p(P),N=p(" pp)"),g(s,"class","avatar svelte-sv5y11"),s.src!==(o=e[0].avatar)&&g(s,"src",o),g(s,"alt",""),g(r,"class","avatar svelte-sv5y11"),g(m,"class","country svelte-sv5y11"),g(i,"class","name svelte-sv5y11"),g(k,"class","pp svelte-sv5y11"),g(x,"class","ranking svelte-sv5y11"),g(n,"class","player svelte-sv5y11"),g(n,"href",O=`https://osu.ppy.sh/users/${e[0].id}`),g(n,"target","_blank"),g(n,"rel","noopener")},m(t,e){u(t,n,e),a(n,r),a(r,s),a(n,c),a(n,i),a(i,l),a(i,$),a(i,m),a(m,y),a(n,b),a(n,x),a(x,w),a(x,_),a(x,k),a(k,j),a(k,q),a(k,N)},p(t,[e]){1&e&&s.src!==(o=t[0].avatar)&&g(s,"src",o),1&e&&L!==(L=t[0].username+"")&&v(l,L),1&e&&T!==(T=t[0].country+"")&&v(y,T),1&e&&E!==(E=t[0].ranking+"")&&v(w,E),1&e&&P!==(P=Number(t[0].pp).toFixed(2)+"")&&v(q,P),1&e&&O!==(O=`https://osu.ppy.sh/users/${t[0].id}`)&&g(n,"href",O)},i:t,o:t,d(t){t&&f(n)}}}function it(t,e,n){let{player:r}=e;return t.$$set=t=>{"player"in t&&n(0,r=t.player)},[r]}class lt extends I{constructor(t){super(),H(this,t,it,ct,o,{player:0})}}function at(t,e,n){const r=t.slice();return r[4]=e[n],r}function ut(t){let e,n,r,s,o,c,i;const l=[pt,dt],h=[];function $(t,e){return t[0]?0:1}return n=$(t),r=h[n]=l[n](t),{c(){e=d("p"),r.c(),s=p("\r\n    Don't forget to\r\n    "),o=d("a"),o.textContent="join the Discord server",c=p("\r\n    (this is also required!)"),g(o,"href","https://discord.gg/uNSqksR"),g(o,"target","_blank"),g(o,"rel","noopener"),g(e,"class","confirm svelte-9p98v4")},m(t,r){u(t,e,r),h[n].m(e,null),a(e,s),a(e,o),a(e,c),i=!0},p(t,o){let c=n;n=$(t),n===c?h[n].p(t,o):(R(),z(h[c],1,1,(()=>{h[c]=null})),A(),r=h[n],r?r.p(t,o):(r=h[n]=l[n](t),r.c()),C(r,1),r.m(e,s))},i(t){i||(C(r),i=!0)},o(t){z(r),i=!1},d(t){t&&f(e),h[n].d()}}}function ft(t){let e,n,r;return n=new ot({props:{href:"https://api.mbs3.fightthe.pw/auth/oauth/osu?redirect=https://mbs3.fightthe.pw",$$slots:{default:[$t]},$$scope:{ctx:t}}}),{c(){e=d("p"),D(n.$$.fragment),g(e,"class","register svelte-9p98v4")},m(t,s){u(t,e,s),M(n,e,null),r=!0},p(t,e){const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(C(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&f(e),U(n)}}}function dt(t){let e,n;return e=new ot({props:{href:"javascript:void(0)",$$slots:{default:[ht]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){D(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function pt(e){let n;return{c(){n=p("Registering...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function ht(t){let e;return{c(){e=p("Confirm registration")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function $t(t){let e;return{c(){e=p("Register")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function mt(t){let e,n,r,s,o,c,i=t[2].length+"",l=t[2],m=[];for(let e=0;e<l.length;e+=1)m[e]=yt(at(t,l,e));const y=t=>z(m[t],1,1,(()=>{m[t]=null}));let b=null;return l.length||(b=vt()),{c(){e=d("div"),n=p("Total players: "),r=p(i),s=h();for(let t=0;t<m.length;t+=1)m[t].c();o=$(),b&&b.c(),g(e,"class","stats")},m(t,i){u(t,e,i),a(e,n),a(e,r),u(t,s,i);for(let e=0;e<m.length;e+=1)m[e].m(t,i);u(t,o,i),b&&b.m(t,i),c=!0},p(t,e){if((!c||4&e)&&i!==(i=t[2].length+"")&&v(r,i),4&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const r=at(t,l,n);m[n]?(m[n].p(r,e),C(m[n],1)):(m[n]=yt(r),m[n].c(),C(m[n],1),m[n].m(o.parentNode,o))}for(R(),n=l.length;n<m.length;n+=1)y(n);A(),l.length?b&&(b.d(1),b=null):b||(b=vt(),b.c(),b.m(o.parentNode,o))}},i(t){if(!c){for(let t=0;t<l.length;t+=1)C(m[t]);c=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)z(m[t]);c=!1},d(t){t&&f(e),t&&f(s),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(m,t),t&&f(o),b&&b.d(t)}}}function gt(e){let n;return{c(){n=p("Loading players...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function vt(t){let e;return{c(){e=p("No players registered yet!")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function yt(t){let e,n;return e=new lt({props:{player:t[4]}}),{c(){D(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.player=t[4]),e.$set(r)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bt(t){let e,n,r,s,o,c,i;const l=[ft,ut],a=[];function p(t,e){return t[1]?t[1].player?-1:1:0}~(e=p(t))&&(n=a[e]=l[e](t));const $=[gt,mt],m=[];function v(t,e){return t[2]?1:0}return o=v(t),c=m[o]=$[o](t),{c(){n&&n.c(),r=h(),s=d("p"),c.c(),g(s,"class","players svelte-9p98v4")},m(t,n){~e&&a[e].m(t,n),u(t,r,n),u(t,s,n),m[o].m(s,null),i=!0},p(t,[i]){let u=e;e=p(t),e===u?~e&&a[e].p(t,i):(n&&(R(),z(a[u],1,1,(()=>{a[u]=null})),A()),~e?(n=a[e],n?n.p(t,i):(n=a[e]=l[e](t),n.c()),C(n,1),n.m(r.parentNode,r)):n=null);let f=o;o=v(t),o===f?m[o].p(t,i):(R(),z(m[f],1,1,(()=>{m[f]=null})),A(),c=m[o],c?c.p(t,i):(c=m[o]=$[o](t),c.c()),C(c,1),c.m(s,null))},i(t){i||(C(n),C(c),i=!0)},o(t){z(n),z(c),i=!1},d(t){~e&&a[e].d(t),t&&f(r),t&&f(s),m[o].d()}}}function xt(t,e,n){let r,s;c(t,K,(t=>n(1,r=t))),c(t,Q,(t=>n(2,s=t)));let o=!1;return[o,r,s,async()=>{n(0,o=!0);const t=-(new Date).getTimezoneOffset()/60,e=await X("/items/players",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,timezone:`UTC${t>0?"+":""}${t}`})});e.errors?alert(e.errors[0].message):(K.set({...r,player:e.data}),Q.set(s.concat([e.data]).sort(((t,e)=>e.ranking-t.ranking)))),n(0,o=!1)}]}class wt extends I{constructor(t){super(),H(this,t,xt,bt,o,{})}}function _t(t){let e;return{c(){e=p("Register here!")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function kt(t){let e;return{c(){e=p("Discord")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function jt(t){let e;return{c(){e=p("Players")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function qt(t){let e,n,r,s,o,c,i,l,p;return s=new ot({props:{href:t[0],$$slots:{default:[_t]},$$scope:{ctx:t}}}),c=new ot({props:{href:"https://discord.gg/uNSqksR",target:"_blank",$$slots:{default:[kt]},$$scope:{ctx:t}}}),l=new ot({props:{href:"#/players",$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){e=d("main"),n=d("div"),r=d("div"),D(s.$$.fragment),o=h(),D(c.$$.fragment),i=h(),D(l.$$.fragment),g(r,"class","register svelte-jkzlu5"),g(n,"class","links svelte-jkzlu5")},m(t,f){u(t,e,f),a(e,n),a(n,r),M(s,r,null),a(n,o),M(c,n,null),a(n,i),M(l,n,null),p=!0},p(t,[e]){const n={};1&e&&(n.href=t[0]),4&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n);const r={};4&e&&(r.$$scope={dirty:e,ctx:t}),c.$set(r);const o={};4&e&&(o.$$scope={dirty:e,ctx:t}),l.$set(o)},i(t){p||(C(s.$$.fragment,t),C(c.$$.fragment,t),C(l.$$.fragment,t),p=!0)},o(t){z(s.$$.fragment,t),z(c.$$.fragment,t),z(l.$$.fragment,t),p=!1},d(t){t&&f(e),U(s),U(c),U(l)}}}function Nt(t,e,n){let r,s;return c(t,K,(t=>n(1,s=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,r=s?"#/players":"https://api.mbs3.fightthe.pw/auth/oauth/osu?redirect=https://mbs3.fightthe.pw")},[r,s]}class Ot extends I{constructor(t){super(),H(this,t,Nt,qt,o,{})}}function Lt(t){let e,n;return e=new Ot({}),{c(){D(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Tt(t){let e,n;return e=new wt({}),{c(){D(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Et(t){let e,n,r,s,o,c;e=new nt({});const i=[Tt,Lt],l=[];function a(t,e){return"players"==t[0]?0:1}return r=a(t),s=l[r]=i[r](t),{c(){D(e.$$.fragment),n=h(),s.c(),o=$()},m(t,s){M(e,t,s),u(t,n,s),l[r].m(t,s),u(t,o,s),c=!0},p(t,[e]){let n=r;r=a(t),r!==n&&(R(),z(l[n],1,1,(()=>{l[n]=null})),A(),s=l[r],s||(s=l[r]=i[r](t),s.c()),C(s,1),s.m(o.parentNode,o))},i(t){c||(C(e.$$.fragment,t),C(s),c=!0)},o(t){z(e.$$.fragment,t),z(s),c=!1},d(t){U(e,t),t&&f(n),l[r].d(t),t&&f(o)}}}function Pt(t,e,n){let r;return c(t,V,(t=>n(0,r=t))),[r]}return new class extends I{constructor(t){super(),H(this,t,Pt,Et,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
