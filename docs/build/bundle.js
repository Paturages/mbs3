var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function i(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function l(t,e,n,r,s,o,c){const l=function(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|s[r];return t}return e.dirty|s}return e.dirty}(e,r,s,o);if(l){const s=i(e,n,r,c);t.p(s,l)}}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function $(){return p(" ")}function h(){return p("")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let y;function b(t){y=t}const x=[],w=[],_=[],k=[],j=Promise.resolve();let q=!1;function L(t){_.push(t)}let N=!1;const O=new Set;function E(){if(!N){N=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];b(e),P(e.$$)}for(b(null),x.length=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];O.has(e)||(O.add(e),e())}_.length=0}while(x.length);for(;k.length;)k.pop()();q=!1,N=!1,O.clear()}}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const T=new Set;let S;function A(){S={r:0,c:[],p:S}}function C(){S.r||r(S.c),S=S.p}function R(t,e){t&&t.i&&(T.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(T.has(t))return;T.add(t),S.c.push((()=>{T.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function M(t){t&&t.c()}function U(t,n,o,c){const{fragment:i,on_mount:l,on_destroy:a,after_update:u}=t.$$;i&&i.m(n,o),c||L((()=>{const n=l.map(e).filter(s);a?a.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(L)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(x.push(t),q||(q=!0,j.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,s,o,c,i,l,a=[-1]){const u=y;b(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=o?o(e,s.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&D(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();s.intro&&R(e.$$.fragment),U(e,s.target,s.anchor,s.customElement),E()}b(u)}class I{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=[];function J(e,n=t){let r;const s=[];function c(t){if(o(e,t)&&(e=t,r)){const t=!F.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),F.push(n,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(o,i=t){const l=[o,i];return s.push(l),1===s.length&&(r=n(c)||t),o(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(r(),r=null)}}}}const{API_URL:G}={API_URL:"https://api.mbs3.fightthe.pw",UI_URL:"https://mbs3.fightthe.pw",isProd:!0},K=J(null),Q=J(null),V=J(null),W=()=>{const{hash:t}=location;"#/players"==t?V.set("players"):(V.set("home"),"#/"!=t&&(location.hash="#/"))};window.addEventListener("hashchange",W),W();const X=(t,e={headers:{}})=>fetch(`${G}${t}`,Object.assign(Object.assign({},e),{headers:Object.assign({Authorization:Y?`Bearer ${Y}`:void 0},e.headers)})).then((t=>t.json()));let Y;function Z(t){let e,n,r,s,o,c,i,l,$=t[0].username+"";return{c(){e=d("div"),n=p("Logged in as\n    "),r=d("b"),s=p($),o=p(" -\n    "),c=d("a"),c.textContent="Log out",g(c,"href","#/"),g(e,"class","me svelte-1qdx2t0")},m(f,d){u(f,e,d),a(e,n),a(e,r),a(r,s),a(e,o),a(e,c),i||(l=m(c,"click",t[1]),i=!0)},p(t,e){1&e&&$!==($=t[0].username+"")&&v(s,$)},d(t){t&&f(e),i=!1,l()}}}function tt(e){let n,r,s,o,c,i=e[0]&&Z(e);return{c(){n=d("div"),r=d("a"),r.innerHTML='<div class="logo svelte-1qdx2t0"><img alt="" src="/images/logo.png" class="svelte-1qdx2t0"/></div> \n    <h1 class="svelte-1qdx2t0"><img alt="Mania Beginner&#39;s Showdown" src="/images/title.png" class="svelte-1qdx2t0"/> \n      <div class="three svelte-1qdx2t0"><span class="svelte-1qdx2t0">3</span></div></h1>',s=$(),o=d("div"),o.innerHTML='<div class="host-title svelte-1qdx2t0">Hosted by</div>\n    Paturages &amp; Davvy',c=$(),i&&i.c(),g(r,"href","#/"),g(o,"class","hosts svelte-1qdx2t0"),g(n,"class","banner svelte-1qdx2t0")},m(t,e){u(t,n,e),a(n,r),a(n,s),a(n,o),a(n,c),i&&i.m(n,null)},p(t,[e]){t[0]?i?i.p(t,e):(i=Z(t),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&f(n),i&&i.d()}}}function et(t,e,n){let r;c(t,K,(t=>n(0,r=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function c(t){try{l(r.next(t))}catch(t){o(t)}}function i(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}l((r=r.apply(t,e||[])).next())}))};return[r,()=>s(void 0,void 0,void 0,(function*(){yield fetch("https://api.mbs3.fightthe.pw/auth/logout",{method:"POST",credentials:"include"}),location.reload()}))]}(async()=>{const{data:t}=await X("/items/players?fields=id,username,country,avatar,timezone,ranking,pp&sort=ranking");Q.set(t);const e=await fetch(`${G}/auth/refresh`,{method:"POST",credentials:"include"});if(200==e.status){const n=await e.json();Y=n.data.access_token;const{data:{first_name:r,email:s,avatar:o}}=await X("/users/me?fields=first_name,email"),c=t.find((({id:t})=>s==t));K.set({avatar:o,username:r,id:s,player:c}),c||(location.hash="#/players")}})();class nt extends I{constructor(t){super(),H(this,t,et,tt,o,{})}}function rt(t){let e,n,r,s,o,c;const p=t[3].default,$=function(t,e,n,r){if(t){const s=i(t,e,n,r);return t[0](s)}}(p,t,t[2],null);return{c(){e=d("a"),n=d("div"),$&&$.c(),g(n,"class","text svelte-1nr1k0b"),g(e,"href",t[0]),g(e,"target",t[1]),g(e,"rel",r="_blank"===t[1]?"noopener":void 0),g(e,"class","button svelte-1nr1k0b")},m(r,i){u(r,e,i),a(e,n),$&&$.m(n,null),s=!0,o||(c=m(e,"click",t[4]),o=!0)},p(t,[n]){$&&$.p&&4&n&&l($,p,t,t[2],n,null,null),(!s||1&n)&&g(e,"href",t[0]),(!s||2&n)&&g(e,"target",t[1]),(!s||2&n&&r!==(r="_blank"===t[1]?"noopener":void 0))&&g(e,"rel",r)},i(t){s||(R($,t),s=!0)},o(t){z($,t),s=!1},d(t){t&&f(e),$&&$.d(t),o=!1,c()}}}function st(t,e,n){let{$$slots:r={},$$scope:s}=e,{href:o}=e,{target:c=""}=e;return t.$$set=t=>{"href"in t&&n(0,o=t.href),"target"in t&&n(1,c=t.target),"$$scope"in t&&n(2,s=t.$$scope)},[o,c,s,r,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class ot extends I{constructor(t){super(),H(this,t,st,rt,o,{href:0,target:1})}}function ct(e){let n,r,s,o,c,i,l,h,m,y,b,x,w,_,k,j,q,L,N,O=e[0].username+"",E=e[0].country+"",P=e[0].ranking+"",T=Number(e[0].pp).toFixed(2)+"";return{c(){n=d("a"),r=d("div"),s=d("img"),c=$(),i=d("div"),l=p(O),h=$(),m=d("div"),y=p(E),b=$(),x=d("div"),w=p(P),_=$(),k=d("div"),j=p("("),q=p(T),L=p(" pp)"),g(s,"class","avatar svelte-sv5y11"),s.src!==(o=e[0].avatar)&&g(s,"src",o),g(s,"alt",""),g(r,"class","avatar svelte-sv5y11"),g(m,"class","country svelte-sv5y11"),g(i,"class","name svelte-sv5y11"),g(k,"class","pp svelte-sv5y11"),g(x,"class","ranking svelte-sv5y11"),g(n,"class","player svelte-sv5y11"),g(n,"href",N=`https://osu.ppy.sh/users/${e[0].id}`),g(n,"target","_blank"),g(n,"rel","noopener")},m(t,e){u(t,n,e),a(n,r),a(r,s),a(n,c),a(n,i),a(i,l),a(i,h),a(i,m),a(m,y),a(n,b),a(n,x),a(x,w),a(x,_),a(x,k),a(k,j),a(k,q),a(k,L)},p(t,[e]){1&e&&s.src!==(o=t[0].avatar)&&g(s,"src",o),1&e&&O!==(O=t[0].username+"")&&v(l,O),1&e&&E!==(E=t[0].country+"")&&v(y,E),1&e&&P!==(P=t[0].ranking+"")&&v(w,P),1&e&&T!==(T=Number(t[0].pp).toFixed(2)+"")&&v(q,T),1&e&&N!==(N=`https://osu.ppy.sh/users/${t[0].id}`)&&g(n,"href",N)},i:t,o:t,d(t){t&&f(n)}}}function it(t,e,n){let{player:r}=e;return t.$$set=t=>{"player"in t&&n(0,r=t.player)},[r]}class lt extends I{constructor(t){super(),H(this,t,it,ct,o,{player:0})}}function at(t,e,n){const r=t.slice();return r[4]=e[n],r}function ut(e){let n;return{c(){n=d("p"),n.textContent="List of players",g(n,"class","registration svelte-9p98v4")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function ft(t){let e,n,r,s;const o=[$t,pt],c=[];function i(t,e){return t[0]?0:1}return n=i(t),r=c[n]=o[n](t),{c(){e=d("p"),r.c(),g(e,"class","confirm svelte-9p98v4")},m(t,r){u(t,e,r),c[n].m(e,null),s=!0},p(t,s){let l=n;n=i(t),n===l?c[n].p(t,s):(A(),z(c[l],1,1,(()=>{c[l]=null})),C(),r=c[n],r?r.p(t,s):(r=c[n]=o[n](t),r.c()),R(r,1),r.m(e,null))},i(t){s||(R(r),s=!0)},o(t){z(r),s=!1},d(t){t&&f(e),c[n].d()}}}function dt(t){let e,n,r;return n=new ot({props:{href:"https://api.mbs3.fightthe.pw/auth/oauth/osu?redirect=https://mbs3.fightthe.pw",$$slots:{default:[mt]},$$scope:{ctx:t}}}),{c(){e=d("p"),M(n.$$.fragment),g(e,"class","register svelte-9p98v4")},m(t,s){u(t,e,s),U(n,e,null),r=!0},p(t,e){const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(R(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&f(e),B(n)}}}function pt(t){let e,n;return e=new ot({props:{href:"javascript:void(0)",$$slots:{default:[ht]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){M(e.$$.fragment)},m(t,r){U(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function $t(e){let n;return{c(){n=p("Registering...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function ht(t){let e;return{c(){e=p("Confirm registration")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function mt(t){let e;return{c(){e=p("Register")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function gt(t){let e,n,r=t[2],s=[];for(let e=0;e<r.length;e+=1)s[e]=bt(at(t,r,e));const o=t=>z(s[t],1,1,(()=>{s[t]=null}));let c=null;return r.length||(c=yt()),{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=h(),c&&c.c()},m(t,r){for(let e=0;e<s.length;e+=1)s[e].m(t,r);u(t,e,r),c&&c.m(t,r),n=!0},p(t,n){if(4&n){let i;for(r=t[2],i=0;i<r.length;i+=1){const o=at(t,r,i);s[i]?(s[i].p(o,n),R(s[i],1)):(s[i]=bt(o),s[i].c(),R(s[i],1),s[i].m(e.parentNode,e))}for(A(),i=r.length;i<s.length;i+=1)o(i);C(),r.length?c&&(c.d(1),c=null):c||(c=yt(),c.c(),c.m(e.parentNode,e))}},i(t){if(!n){for(let t=0;t<r.length;t+=1)R(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t),t&&f(e),c&&c.d(t)}}}function vt(e){let n;return{c(){n=p("Loading players...")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function yt(t){let e;return{c(){e=p("No players registered yet!")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function bt(t){let e,n;return e=new lt({props:{player:t[4]}}),{c(){M(e.$$.fragment)},m(t,r){U(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.player=t[4]),e.$set(r)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function xt(t){let e,n,r,s,o,c,i;const l=[dt,ft,ut],a=[];function p(t,e){return t[1]?t[1].player?2:1:0}e=p(t),n=a[e]=l[e](t);const h=[vt,gt],m=[];function v(t,e){return t[2]?1:0}return o=v(t),c=m[o]=h[o](t),{c(){n.c(),r=$(),s=d("p"),c.c(),g(s,"class","players svelte-9p98v4")},m(t,n){a[e].m(t,n),u(t,r,n),u(t,s,n),m[o].m(s,null),i=!0},p(t,[i]){let u=e;e=p(t),e===u?a[e].p(t,i):(A(),z(a[u],1,1,(()=>{a[u]=null})),C(),n=a[e],n?n.p(t,i):(n=a[e]=l[e](t),n.c()),R(n,1),n.m(r.parentNode,r));let f=o;o=v(t),o===f?m[o].p(t,i):(A(),z(m[f],1,1,(()=>{m[f]=null})),C(),c=m[o],c?c.p(t,i):(c=m[o]=h[o](t),c.c()),R(c,1),c.m(s,null))},i(t){i||(R(n),R(c),i=!0)},o(t){z(n),z(c),i=!1},d(t){a[e].d(t),t&&f(r),t&&f(s),m[o].d()}}}function wt(t,e,n){let r,s;c(t,K,(t=>n(1,r=t))),c(t,Q,(t=>n(2,s=t)));let o=!1;return[o,r,s,async()=>{n(0,o=!0);const t=-(new Date).getTimezoneOffset()/60,e=await X("/items/players",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,timezone:`UTC${t>0?"+":""}${t}`})});e.errors?alert(e.errors[0].message):(K.set({...r,player:e.data}),Q.set(s.concat([e.data]).sort(((t,e)=>e.ranking-t.ranking)))),n(0,o=!1)}]}class _t extends I{constructor(t){super(),H(this,t,wt,xt,o,{})}}function kt(t){let e;return{c(){e=p("Register here!")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function jt(t){let e;return{c(){e=p("Discord")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function qt(t){let e;return{c(){e=p("Players")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function Lt(t){let e,n,r,s,o,c,i,l,p;return s=new ot({props:{href:t[0],$$slots:{default:[kt]},$$scope:{ctx:t}}}),c=new ot({props:{href:"https://discord.gg/uNSqksR",target:"_blank",$$slots:{default:[jt]},$$scope:{ctx:t}}}),l=new ot({props:{href:"#/players",$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){e=d("main"),n=d("div"),r=d("div"),M(s.$$.fragment),o=$(),M(c.$$.fragment),i=$(),M(l.$$.fragment),g(r,"class","register svelte-jkzlu5"),g(n,"class","links svelte-jkzlu5")},m(t,f){u(t,e,f),a(e,n),a(n,r),U(s,r,null),a(n,o),U(c,n,null),a(n,i),U(l,n,null),p=!0},p(t,[e]){const n={};1&e&&(n.href=t[0]),4&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n);const r={};4&e&&(r.$$scope={dirty:e,ctx:t}),c.$set(r);const o={};4&e&&(o.$$scope={dirty:e,ctx:t}),l.$set(o)},i(t){p||(R(s.$$.fragment,t),R(c.$$.fragment,t),R(l.$$.fragment,t),p=!0)},o(t){z(s.$$.fragment,t),z(c.$$.fragment,t),z(l.$$.fragment,t),p=!1},d(t){t&&f(e),B(s),B(c),B(l)}}}function Nt(t,e,n){let r,s;return c(t,K,(t=>n(1,s=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,r=s?"#/players":"https://api.mbs3.fightthe.pw/auth/oauth/osu?redirect=https://mbs3.fightthe.pw")},[r,s]}class Ot extends I{constructor(t){super(),H(this,t,Nt,Lt,o,{})}}function Et(t){let e,n;return e=new Ot({}),{c(){M(e.$$.fragment)},m(t,r){U(e,t,r),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Pt(t){let e,n;return e=new _t({}),{c(){M(e.$$.fragment)},m(t,r){U(e,t,r),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Tt(t){let e,n,r,s,o,c;e=new nt({});const i=[Pt,Et],l=[];function a(t,e){return"players"==t[0]?0:1}return r=a(t),s=l[r]=i[r](t),{c(){M(e.$$.fragment),n=$(),s.c(),o=h()},m(t,s){U(e,t,s),u(t,n,s),l[r].m(t,s),u(t,o,s),c=!0},p(t,[e]){let n=r;r=a(t),r!==n&&(A(),z(l[n],1,1,(()=>{l[n]=null})),C(),s=l[r],s||(s=l[r]=i[r](t),s.c()),R(s,1),s.m(o.parentNode,o))},i(t){c||(R(e.$$.fragment,t),R(s),c=!0)},o(t){z(e.$$.fragment,t),z(s),c=!1},d(t){B(e,t),t&&f(n),l[r].d(t),t&&f(o)}}}function St(t,e,n){let r;return c(t,V,(t=>n(0,r=t))),[r]}return new class extends I{constructor(t){super(),H(this,t,St,Tt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
